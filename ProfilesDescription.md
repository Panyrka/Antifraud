# Описание работы профилей

### Таблица с профилями
1. id
2. name
3. key
4. date_segment: h, d, m, y
5. filter (?)

### Таблица профиля
1. id
2. key (уникальный идентификатор профиля)
3. amount
4. date_segment (hour, day, month, year)

## Пример

1. Происходит транзакция, проверяются правила
2. Если транзакция соответствует условиям профиля, то она должна быть записана в БД
3. Проверяем, есть ли в БД за текущий сегмент времени данные
3.1. Если есть, то делаем операцию UPDATE
3.2. Если нет, делаем операцию DELETE

## Scheduler

1. Каждый час/день/месяц/год из БД должны удаляться старые сегменты